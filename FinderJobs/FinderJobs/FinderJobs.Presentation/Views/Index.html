<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Finder Jobs</title>
    <!-- CDN Font CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Bootstrap Core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Notify CSS -->
    <link href="notify/notify.css" rel="stylesheet" />

    <style>
        li {
            font-size: 12px;
            line-height: .1em;
        }

        a {
            cursor: pointer;
        }

        .panel-heading {
            background-color: #ed7c31;
            font-weight: bold;
        }

        .cor-finder-jobs {
            background-color: skyblue;
        }

        .menos-padding {
            padding-left: 3px;
            padding-right: 0px;
        }

        .loader {
            border: 16px solid #f3f3f3; /* Light grey */
            border-top: 16px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 70px;
            height: 70px;
            animation: spin 2s linear infinite;
            margin-left: 40%;
        }

        .tabela-preco {
            background-color: white;
            font-size: small;
            padding: 0px;
        }

        .preco {
            font-weight: bold;
        }

        .blink_text {
            animation: 1s blinker linear infinite;
            -webkit-animation: 1s blinker linear infinite;
            -moz-animation: 1s blinker linear infinite;
            color: red;
        }

        @-moz-keyframes blinker {
            0% {
                opacity: 1.0;
            }

            50% {
                opacity: 0.0;
            }

            100% {
                opacity: 1.0;
            }
        }

        @-webkit-keyframes blinker {
            0% {
                opacity: 1.0;
            }

            50% {
                opacity: 0.0;
            }

            100% {
                opacity: 1.0;
            }
        }

        @keyframes blinker {
            0% {
                opacity: 1.0;
            }

            50% {
                opacity: 0.0;
            }

            100% {
                opacity: 1.0;
            }
        }
    </style>
</head>
<body id="page-top" class="index">
    <!-- Navigation -->
    <div class="container">
        <br />
        <div class="row">
            <div class="col-lg-8">
                <nav id="" class="navbar">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu-navegacao">
                            <span class="sr-only">Toggle navigation</span><i class="glyphicon glyphicon-menu-hamburger" style="font-size:x-large"></i>
                        </button>
                        <img src="../images/logo-fj.jpg" height="92" style="border-radius: 90px;" />
                    </div>

                    <div class="collapse navbar-collapse" id="menu-navegacao" style="overflow: hidden">
                        <ul class="nav navbar-nav navbar-right">
                            <li class="hidden">
                                <a href="#page-top"></a>
                            </li>
                            <li>
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                        <div class="form-group col-lg-2 col-md-2 col-sm-2 col-xs-12" style="top: 7px; font-weight: bold">
                                            Candidato:
                                        </div>
                                        <div class="form-group col-lg-6 col-md-6 col-sm-5 col-xs-12 menos-padding">
                                            <input type="text" class="form-control" placeholder="Email" id="EmailCand" name="Email">
                                        </div>
                                        <div class="form-group col-lg-3 col-md-3 col-sm-4 col-xs-10 menos-padding">
                                            <input type="password" class="form-control" placeholder="Senha" id="SenhaCand" name="Senha">
                                        </div>
                                        <div class="form-group col-lg-1 col-md-1 col-sm-1 col-xs-2 menos-padding">
                                            <button id="btnEntrarCand" type="button" class="btn btn-primary" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Aguarde"><i class="glyphicon glyphicon-log-in"></i> </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                        <div class="form-group col-lg-2 col-md-2 col-sm-2 col-xs-12" style="top: 7px; font-weight: bold">
                                            Empresa:
                                        </div>
                                        <div class="form-group col-lg-6 col-md-6 col-sm-5 col-xs-12 menos-padding">
                                            <input type="text" class="form-control" placeholder="Email" id="EmailEmpr" name="Email">
                                        </div>
                                        <div class="form-group col-lg-3 col-md-3 col-sm-4 col-xs-10 menos-padding">
                                            <input type="password" class="form-control" placeholder="Senha" id="SenhaEmpr" name="Senha">
                                        </div>
                                        <div class="form-group col-lg-1 col-md-1 col-sm-1 col-xs-2 menos-padding">
                                            <button id="btnEntrarEmpr" type="button" class="btn btn-primary" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Aguarde"><i class="glyphicon glyphicon-log-in"></i> </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="text-center menos-padding">
                                        <a data-toggle="modal" href="#modalEsqueciSenha" style="font-size:small; color: #A569BD; font-weight: bold">esqueci a senha!</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <!-- /.navbar-collapse -->
                    </div>
                    <!-- /.container-fluid -->
                </nav>
            </div>
            <div class="col-lg-2">
                <img src="../images/icone-portal-transparencia.jpg" height="80" style="border-radius: 4px;" />
            </div>
            <div class="col-lg-2" style="font-size:smaller;">
                <span>Currículos Únicos : 0012</span><br />
                <span>Empresas Únicas : 0004</span><br />
                <span>SLA Mensal (uptime) = 99.87%</span>
            </div>
        </div>
    </div>
    <!--<div class="row text-center">
        <span style="color: #ff6a00;">Cadastre-se:</span>
        <a onclick="Cadastro('Candidato')" style="font-size:small; color: #0b8711;">Candidato</a> ou
        <a onclick="Cadastro('Empresa')" style="font-size:small; color: #3498db;"> Empresa</a>
    </div>-->
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12" id="planosCandidato">
                <div class="col-lg-2 col-md-2 col-sm-2 text-center tabela-preco">
                    <div class="panel">
                        <div class="panel-heading">Planos(Candidato)</div>
                    </div>
                </div>
                <div class="col-lg-5 col-md-5 col-sm-5 text-center tabela-preco">
                    <div class="panel panel-default">
                        <div class="panel-heading" style="background-color: #D4E6F1; color: black;">Standart <a class="" id="btn_plano1" onclick="ContratarPlano('Standart')"><i class="glyphicon glyphicon-hand-right blink_text"></i> Cadastrar-se</a></div>
                        <ul class="list-group">
                            <li class="list-group-item">Uma candidatura por vaga publicada</li>
                            <li class="list-group-item">Perfil visível</li>
                            <li class="list-group-item">30 palavras-chave</li>
                            <li class="list-group-item">Sem re-candidaturas</li>
                            <li class="list-group-item">Sem limite de candidaturas às vagas</li>
                            <li class="list-group-item preco">R$ 0,00(grátis)</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-5 col-md-5 col-sm-5 text-center tabela-preco">
                    <div class="panel panel-default">
                        <div class="panel-heading" style="background-color: #EAEDED; color: black">Advanced <a class="" id="btn_plano2" onclick="ContratarPlano('Advanced')"><i class="glyphicon glyphicon-hand-right blink_text"></i> Contratar</a></div>
                        <ul class="list-group">
                            <li class="list-group-item">Re-candidatura as vagas(segunda vez)</li>
                            <li class="list-group-item">Perfil anônimo</li>
                            <li class="list-group-item">Permitido "copiar-colar"</li>
                            <li class="list-group-item">Envio de anexos(somente .PDF) até 1.1MB</li>
                            <li class="list-group-item">Chat on-line</li>
                            <li class="list-group-item preco">R$ 100,00/ano</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12" id="planosCandidato">
                <div class="col-lg-2 col-md-2 col-sm-2 text-center tabela-preco">
                    <div class="panel">
                        <div class="panel-heading">Planos(Empresa)</div>
                    </div>
                </div>
                <div class="col-lg-5 col-md-5 col-sm-5 text-center tabela-preco">
                    <div class="panel panel-default">
                        <div class="panel-heading" style="background-color: #D5D8DC; color: black">Premium <a class="" id="btn_plano1" onclick="ContratarPlano('Premium')"><i class="glyphicon glyphicon-hand-right blink_text"></i> Contratar</a></div>
                        <ul class="list-group">
                            <li class="list-group-item">Anúncio: 10(dez) dias de publicação</li>
                            <li class="list-group-item">Sem re-publicação</li>
                            <li class="list-group-item">30 palavras-chave</li>
                            <li class="list-group-item">Perfil visível</li>
                            <li class="list-group-item">Até 10(dez) publicações por mês</li>
                            <li class="list-group-item">Sem limite de vagas publicadas</li>
                            <li class="list-group-item">Sem limite de buscas</li>
                            <li class="list-group-item">Upgrade via aditivos</li>
                            <li class="list-group-item preco">R$ 100,00/ano</li>
                        </ul>
                    </div>
                </div>

                <div class="col-lg-5 col-md-5 col-sm-5 text-center tabela-preco">
                    <div class="panel panel-default">
                        <div class="panel-heading" style="background-color: #F1C40F; color: black">Gold <a class="" id="btn_plano1" onclick="ContratarPlano('Gold')"><i class="glyphicon glyphicon-hand-right blink_text"></i> Contratar</a></div>
                        <ul class="list-group">
                            <li class="list-group-item">Anúncio: 30(trinta) dias de publicação</li>
                            <li class="list-group-item">Re-publicar vaga(segunda vez)</li>
                            <li class="list-group-item">Perfil anônimo</li>
                            <li class="list-group-item">Site próprio customizável(custo adicional)</li>
                            <li class="list-group-item">Permitido "copiar-colar"</li>
                            <li class="list-group-item">"On-demand" via projetos implantação(custo adicional)</li>
                            <li class="list-group-item">Um formulário de 5 questões por vaga publicada</li>
                            <li class="list-group-item">Chat on-line</li>
                            <li class="list-group-item preco">R$ 1.000,00/mês(não inclui custos adicionais)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer class="text-center">
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 class="" style="color: #ed7c31">
                            Somos o primeiro e único portal de empregos à usar big data science:processo seletivo inteligente.
                        </h4>
                        <ul class="list-inline">
                            <li>
                                <a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-facebook"></i></a>
                            </li>
                            <li>
                                <a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-twitter"></i></a>
                            </li>
                            <li>
                                Direitos Reservados &copy; Finder Jobs 2014-<span id="anoAtual"></span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal Cadastro -->
    <div class="modal fade" id="modalCadastro" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Cadastro</h4>
                </div>
                <div class="modal-body" id="modalCadastroBody">
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="form-group col-lg-6 text-center">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                        </div>
                        <div class="form-group col-lg-6 text-center">
                            <input class="btn btn-default" type="button" id="btnCadastrar" value="Cadastrar" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Dados Pessoais -->
    <div class="modal fade" id="modalDadosPessoais" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Informe seus dados</h4>
                </div>
                <div class="modal-body" id="modalDadosPessoaisBody">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">
                                <input type="hidden" value="" name="Plano.Id" id="Plano_Id">
                                <div class="col-md-12">
                                    <div class="col-md-6 form-group">
                                        Nome Completo<br />
                                        <input type="text" name="DadosPessoaisNome" id="DadosPessoais_Nome" class="form-control nome" />
                                    </div>
                                    <div class="col-md-3 form-group" id="dvCpfCnpj">
                                        <input type="radio" name="tipo" value="cpf" checked>CPF <input type="radio" name="tipo" value="cnpj">CNPJ<br />
                                        <input type="text" name="DadosPessoaisCpfCnpj" id="DadosPessoais_CpfCnpj" class="form-control cpf" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-6 form-group">
                                        Email<br />
                                        <input type="text" name="DadosPessoaisEmail" id="DadosPessoais_Email" class="form-control" />
                                    </div>
                                    <div class="col-md-3 form-group" id="dvCelular">
                                        Celular<br />
                                        <input type="text" name="DadosPessoaisTelefone" id="DadosPessoais_Telefone" class="form-control phone_with_ddd" />
                                    </div>
                                    <div class="col-md-2 form-group" id="">
                                        <br />
                                        <button type="button" onclick="Registrar()" id="btnRegistrar" class="btn btn-success btn-block"  data-loading-text="<i class='fa fa-spinner fa-spin '></i> Aguarde">Enviar</button>                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Dados Pagamento -->
    <div class="modal fade" id="modalPagamento" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Pagamento</h4>
                </div>
                <div class="modal-body" id="modalPagamentoBody">
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <div class="loader"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Recuperar Senha -->
    <div class="modal fade" id="modalEsqueciSenha" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Esqueceu sua senha?</h4>
                    <span class="modal-title">Você pode cadastrar uma nova senha</span>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <input type="text" class="form-control" id="emailEsqueceuSenha" placeholder="Seu email">
                    </div>
                    <button type="button" id="btnEsqueceuSenha" class="btn btn-success btn-block"  data-loading-text="<i class='fa fa-spinner fa-spin '></i> Aguarde"><i class="glyphicon glyphicon-envelope"></i> Enviar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Nova Senha -->
    <div class="modal fade" id="modalNovaSenha" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Cadastrar Senha </h4>
                </div>
                <div class="modal-body">
                    <input hidden id="NovaSenhaCode" name="NovaSenhaCode" />
                    <input hidden id="NovaSenhaEmail" name="NovaSenhaEmail" />
                    <div class="form-group">
                        <label for="usrname"><span class="glyphicon glyphicon-lock"></span> Senha</label>
                        <input type="password" class="form-control" id="NovaSenha" placeholder="Nova senha">
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-control" id="NovaSenhaConfirma" placeholder="Repita a senha">
                    </div>
                    <button type="button" id="btnNovaSenha" class="btn btn-success btn-block"><span class="glyphicon glyphicon-off"></span> Enviar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Contato -->
    <div class="portfolio-modal modal fade" id="modalContato" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-lg-12 text-center">
                                    <h2>Contato</h2>
                                    <hr class="star-primary">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-8 col-lg-offset-2">
                                    <form name="sentMessage" id="contactForm" novalidate>
                                        <div class="row control-group">
                                            <div class="form-group col-xs-12 floating-label-form-group controls">
                                                <label>Name</label>
                                                <input type="text" class="form-control" placeholder="Name" id="name" required data-validation-required-message="Please enter your name.">
                                                <p class="help-block text-danger"></p>
                                            </div>
                                        </div>
                                        <div class="row control-group">
                                            <div class="form-group col-xs-12 floating-label-form-group controls">
                                                <label>Email Address</label>
                                                <input type="email" class="form-control" placeholder="Email Address" id="email" required data-validation-required-message="Please enter your email address.">
                                                <p class="help-block text-danger"></p>
                                            </div>
                                        </div>
                                        <div class="row control-group">
                                            <div class="form-group col-xs-12 floating-label-form-group controls">
                                                <label>Phone Number</label>
                                                <input type="tel" class="form-control" placeholder="Phone Number" id="phone" required data-validation-required-message="Please enter your phone number.">
                                                <p class="help-block text-danger"></p>
                                            </div>
                                        </div>
                                        <div class="row control-group">
                                            <div class="form-group col-xs-12 floating-label-form-group controls">
                                                <label>Message</label>
                                                <textarea rows="5" class="form-control" placeholder="Message" id="message" required data-validation-required-message="Please enter a message."></textarea>
                                                <p class="help-block text-danger"></p>
                                            </div>
                                        </div>
                                        <br>
                                        <div id="success"></div>
                                        <div class="row">
                                            <div class="form-group col-xs-12">
                                                <button type="submit" class="btn btn-success btn-lg">Send</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="jquery/jquery.min.js"></script>
    <!-- Notify JS -->
    <script src="notify/notify.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="bootstrap/js/bootstrap-switch.min.js"></script>
    <script src="bootstrap/js/bootstrap-filestyle.min.js"></script>
    <!-- Plugin JavaScript -->
    <script src="jquery/jquery.easing.min.js"></script>
    <script src="../jquery/jquery.mask.min.js"></script>

    <script language="javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyCycG73VSX4N6sFxieKuCpYBnAKCJrG3XI"></script>

    <script>

        $(document).ready(function () {
            $('#anoAtual').html(new Date().getFullYear());

            localStorage.setItem('cadastro', '');
            $.urlParam = function (name) {
                var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
                var retorno = results != null ? results[1] : null;
                return retorno
            }
            if ($.urlParam('code') != null && $.urlParam('email') != null) {
                $('#NovaSenhaEmail').val($.urlParam('email'));
                $('#NovaSenhaCode').val($.urlParam('code'));
                $('#modalNovaSenha').modal('show');
            }
        });

        $("#btnNovaSenha").click(function () {
            $("#btnNovaSenha").button('aguarde...');
            var novaSenha = $('#NovaSenha').val();
            var confirmaSenha = $('#NovaSenhaConfirma').val();
            var email = $('#NovaSenhaEmail').val();
            var code = $('#NovaSenhaCode').val();

            if (novaSenha == confirmaSenha) {
                var dados = {
                    email: email,
                    code: code,
                    password: novaSenha,
                };

                $.ajax({
                    url: "../Acesso/NovaSenha",
                    type: "GET",
                    data: dados,
                    contentType: 'application/json',
                    success: function (data) {
                        Notify('Ok, você já pode acessar com a nova senha', null, null, 'success');
                        setTimeout(function () {
                            window.location.replace("../");
                        }, 2000);
                    },
                    error: function (result) {
                        Notify('Ocoreu um erro, informe a equipe de suporte', null, null, 'danger');
                    }
                });
            }
            else {
                Notify('A confirmação precisa ser igual a senha!', null, null);
            }

            setTimeout(function () {
                $("#btnNovaSenha").button('reset');
            }, 1000);
        });

        $("#btnEsqueceuSenha").click(function () {
            $("#btnEsqueceuSenha").button('aguarde...');
            var email = $('#emailEsqueceuSenha').val();
            var regexEmail = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            if (regexEmail.test(email)) {
                var dados = {
                    Email: email,
                };

                $.ajax({
                    url: "../Acesso/EsqueceuSenha",
                    type: "GET",
                    data: dados,
                    contentType: 'application/json',
                    success: function (data) {
                        Notify('Realizado, verifique seu email', null, null, 'success');
                        $('#modalEsqueciSenha').modal('hide');
                    },
                    error: function (result) {
                        Notify('Ocoreu um erro, informe a equipe de suporte', null, null, 'danger');
                    }
                });
            }
            else {
                Notify('Email inválido!', null, null);
            }

            setTimeout(function () {
                $("#btnEsqueceuSenha").button('reset');
            }, 1000);
        });

        $("#btnEntrarCand").click(function () {
            var email = $('#EmailCand').val();
            var senha = $('#SenhaCand').val();
            AcessarFJ(email, senha);
        });

        $("#btnEntrarEmpr").click(function () {
            var email = $('#EmailEmpr').val();
            var senha = $('#SenhaEmpr').val();
            AcessarFJ(email, senha);
        });

        function AcessarFJ(email, senha) {

            $("#btnEntrar").button('loading');

            if (email != undefined && email.length > 5 && senha != undefined && senha.length > 5) {
                var dados = {
                    grant_type: "password",
                    username: email,
                    password: senha
                };

                $.ajax({
                    url: "../api/security/token",
                    type: "POST",
                    data: dados,
                    contentType: 'application/json',
                    success: function (data) {
                        if (data != null && data.access_token != null) {
                            localStorage.setItem('token', data.access_token);
                            localStorage.setItem('dataSetVagas', null);
                            Notify('Autorizado!', null, null, 'success');

                            GetCadastro();
                        }
                        else {
                            Notify('Usuário e senha inválidos', null, null, 'danger');
                        }
                    },
                    error: function (result) {
                        console.log(result);
                        Notify(result.responseJSON.error_description, null, null, 'danger');
                    }
                });
            }
            else {
                Notify('Preencha os dados de acesso!', null, null);
                Notify('Usário e Senha com 8 digitos cada!', null, null, 'info');
            }

            setTimeout(function () {
                $("#btnEntrar").button('reset');
            }, 1000);

        }

        function GetCadastro() {
            $.ajax({
                url: "../Cadastro/Get",
                type: "GET",
                contentType: 'application/json',
                success: function (data) {                    
                    if (data.sucesso) {
                        Notify('Redirecionando para sua home!', null, null, 'success');
                        localStorage.setItem('cadastro', JSON.stringify(data.dados));
                        window.location.replace('../Cadastro/' + data.dados.Plano.Tipo);
                    }
                    else {
                        Notify('Erro ao recuperar cadastro', null, null, 'danger');
                    }
                },
                error: function (result) {
                    console.log(result);
                    Notify(result.responseJSON.error_description, null, null, 'danger');
                },
                beforeSend: setHeader
            });
        }

        function ContratarPlano(plano) {
            $("input[name=tipo]:radio").change(function () {
                $('#Cadastro_CpfCnpj').removeClass('cpf').removeClass('cnpj');
                if ($(this).val() == "cpf")
                    $("#Cadastro_CpfCnpj").addClass('cpf');
                else
                    $("#Cadastro_CpfCnpj").addClass('cnpj');
            });

            $('.phone_with_ddd').mask('(00) 00000-0000');
            $('.cpf').mask('000.000.000-00', { reverse: true });
            $('.cnpj').mask('00.000.000/0000-00', { reverse: true });
            $('.nome').mask('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', {
                'translation': {
                    A: { pattern: /[a-zA-Z0-9 ]/ }
                }
            });

            $('#Plano_Id').val(plano);
            $('#modalDadosPessoais').modal();
        }

        $("#DadosPessoais_Email").on('change', function () {
            var email = $('#DadosPessoais_Email').val();

            if (TestarEmail(email)) {
                $.get("../Acesso/UsuarioDisponivel?email=" + email, function (data) {
                    if (!data.sucesso) {
                        Notify('Não disponível, este email já foi cadastrado', null, null, 'danger');
                        $("#DadosPessoais_Email").val('');
                        $("#DadosPessoais_Email").focus();
                    }
                }).fail(function (result) {
                    Notify('Erro ao validar email ' + result, null, null, 'danger');
                });
            }
            else {                
                Notify('Email inválido ', null, null);
            }                
        });

        function Registrar() {
            var valido = true;
            var plano = $('#Plano_Id').val();
            var nome = $('#DadosPessoais_Nome').val();
            var email = $('#DadosPessoais_Email').val();
            var cpfCnpj = $('#DadosPessoais_CpfCnpj').cleanVal();
            var telefone = $('#DadosPessoais_Telefone').cleanVal();

            if (plano == undefined || plano == null || plano == '') {
                valido = false;
                Notify('Plano não definido', null, null, 'danger');
            }

            if (nome == undefined || nome == null || nome == '') {
                valido = false;
                Notify('Informe seu nome', null, null, 'danger');
            }

            if (email == undefined || email == null || email == '') {
                valido = false;
                Notify('Informe seu email', null, null, 'danger');
            }
            else if (!TestarEmail(email)) {
                valido = false;
                Notify('Email inválido', null, null, 'danger');
            }                

            if (cpfCnpj == undefined || cpfCnpj == null || cpfCnpj == '') {
                valido = false;
                Notify('Informe seu cpf/cnpj', null, null, 'danger');
            }

            if (telefone == undefined || telefone == null || telefone == '') {
                valido = false;
                Notify('Informe seu telefone', null, null, 'danger');
            }            

            if (valido) {
                // Registrar usuário

                var dadosPessoais = {
                    'plano': plano,
                    'nome': nome,
                    'email': email,
                    'cpfCnpj': cpfCnpj,
                    'telefone': telefone
                };

                var $this = $('#btnRegistrar');
                $this.button('loading');

                $.ajax({
                    url: "../Acesso/Registrar?email=" + email,
                    contentType: 'application/json',
                    dataType: 'json',
                    type: 'get',
                    success: function (data) {
                        if (data.sucesso) {                            
                            // Gravar Cadastro e o Plano
                            Assinatura(dadosPessoais);
                        }
                        else {
                            Notify('Erro ao registrar, informe a equipe de suporte', null, null, 'danger');
                            console.log(data);
                        }

                        $this.button('reset');
                    },
                    error: function (result) {
                        Notify('Erro ao registrar, informe a equipe de suporte', null, null, 'danger');
                        console.log(result);
                    }
                });
            }
        }

        function TestarEmail(email) {
            var regexEmail = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return regexEmail.test(email);
        }

        function Assinatura(dadosPessoais) {

            $.ajax({
                url: "../Plano/Assinatura",
                data: JSON.stringify(dadosPessoais),
                contentType: 'application/json',
                dataType: 'json',
                type: 'post',
                beforeSend: setHeader,
                success: function (data) {
                    if (data.sucesso) {                        
                        $('#modalDadosPessoais').modal('hide');
                        if (dadosPessoais.plano == 'Standart') {                                                        
                            Notify('Por favor, acesse seu email para completar seu cadastro!', null, null, 'success');
                        }
                        else {
                            var iframe = '<iframe id="iframePagSeguro" src="' + data.mensagem + '" style="zoom:0.60" width="99.6%" height="750" frameborder="0"></iframe>';
                            $('#modalPagamentoBody').html(iframe);
                            $('#modalPagamento').modal();
                            Notify('Depois de efetuar o pagamento, acesse seu email para completar seu cadastro!', null, null, 'success');
                        }
                    }
                    else {
                        Notify('Ocorreu um erro, informe a equipe de suporte', null, null, 'danger');
                        console.log(data);
                    }
                },
                error: function (result) {
                    Notify('correu um erro, informe a equipe de suporte', null, null, 'danger');
                    console.log(result);
                }
            });
        }

        function setHeader(xhr) {
            xhr.setRequestHeader('Authorization', 'bearer ' + localStorage.getItem('token'));
        }

    </script>
</body>
</html>